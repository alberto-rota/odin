# Bindings
bind k killw
set-option -g focus-events on
bind m set -g mouse on \; display 'Mouse: ON'
bind M set -g mouse off \; display 'Mouse: OFF'

# Coloring
set -g default-terminal "xterm-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc"

# Set status bar background to orange and foreground (text) to gray
set -g status-style "bg=#118AB2,fg=#000000"
set -g pane-active-border-style "fg=#2b2b2b"


#Powerline
# Status bar configuration
set -g status-left-length 20
set -g status-right-length 200
# Left side: session name
set -g status-left "#[fg=#000000,bold] #S #[default] "
set -g status-right "\
#[fg=#000000,bold] \
CPU #(cpu_pct=\$(top -bn1 | grep 'Cpu(s)' | awk '{print $2}' | sed 's/%us,//' | cut -d. -f1); \
bar_len=\$(awk \"BEGIN {print int(\$cpu_pct * 8 / 100)}\"); \
filled=\$(printf '■%.0s' \$(seq 1 \$bar_len 2>/dev/null)); \
empty=\$(printf '□%.0s' \$(seq 1 \$((8 - bar_len)) 2>/dev/null)); \
echo \"\$cpu_pct% \$filled\$empty\") \
    \
RAM #(ram_pct=\$(free | grep Mem | awk '{printf \"%.0f\", \$3/\$2 * 100}'); \
bar_len=\$(awk \"BEGIN {print int(\$ram_pct * 8 / 100)}\"); \
filled=\$(printf '■%.0s' \$(seq 1 \$bar_len 2>/dev/null)); \
empty=\$(printf '□%.0s' \$(seq 1 \$((8 - bar_len)) 2>/dev/null)); \
echo \"\$ram_pct% \$filled\$empty\") \
    \
#(for mount in / /datasets /backups; do \
  if df \"\$mount\" >/dev/null 2>&1; then \
    pct=\$(df \"\$mount\" | awk 'NR==2{gsub(/\%/, \"\"); print \$5}'); \
    name=\$([ \"\$mount\" = \"/\" ] && echo \"disk\" || basename \"\$mount\"); \    
    bar_len=\$(echo \"\$pct\" | awk '{print int(\$1 * 8 / 100)}'); \
    filled=\$(printf '■%.0s' \$(seq 1 \$bar_len 2>/dev/null)); \
    empty=\$(printf '□%.0s' \$(seq 1 \$((8 - bar_len)) 2>/dev/null)); \
    echo -n \"\$name:\$pct% \$filled\$empty \"; \
  fi; \
done) \
    "
